<?xml version='1.0'  encoding='UTF-8' ?>
<history>
	<historyItem>
		<sql><![CDATA[declare
    v_is_background number := 0;
    v_doc_file_exist  number := 0;
begin
    select count(*) into v_is_background from user_tab_cols where lower(table_name) ='ca_badge_layout_items' and lower(column_name) = 'is_background';
        DBMS_OUTPUT.PUT_LINE('Dwdw v_is_background: ' || v_is_background);
    if v_is_background > 0 then
        DBMS_OUTPUT.PUT_LINE('Dwdw v_is_background if: ' || v_is_background);
    end if;

select count(*) into v_doc_file_exist from user_tab_cols where lower(table_name) ='ca_badge_layout_items' and lower(column_name) = 'doc_file'    
    
--    update ca_badge_layout_items set image = doc_file, is_background = 'Y' where doc_file is not null;
    
   exception when no_data_found then
      null;
end;
/

alter table ca_badge_layout_items add is_background varchar2(1) default 'N';

declare  v_setting_counter number := 0;
begin
--   select count(*) into v_setting_counter
--      from safe_system_options
--      where setting_name = 'product_install_string'
--      and setting_value like '%(CL)%';
--
--   if v_setting_counter > 0 then
--      update ca_reference_data_options set code_01 = 'cardlink_time', ind_01 = 'unlock_ind'  where reference_type = 'ASTE';
--      commit;
--   end if;
--
--   exception when no_data_found then
--      null;
end;
/

select count(*) into from user_tab_cols where lower(table_name) ='ca_badge_layout_items' and lower(column_name) = 'is_background'


--changeset safe:SUITE-18271.1.1 runAlways:false runOnChange:true failOnError:true
--preconditions onFail:MARK_RAN onError:HALT
--precondition-sql-check expectedResult:0 select count(*) from user_tab_cols where lower(table_name) ='ca_badge_layout_items' and lower(column_name) = 'is_background'
alter table ca_badge_layout_items add is_background varchar2(1) default 'N';

--changeset safe:SUITE-18271.2.1 runAlways:false runOnChange:false failOnError:true
--preconditions onFail:MARK_RAN onError:HALT
--precondition-sql-check expectedResult:1 select count(*) from user_tab_cols where lower(table_name) ='ca_badge_layout_items' and lower(column_name) = 'doc_file'
update ca_badge_layout_items set image = doc_file, is_background = 'Y' where doc_file is not null;

--changeset safe:SUITE-18271.3.1 runAlways:false runOnChange:false failOnError:true
--preconditions onFail:MARK_RAN onError:HALT
--precondition-sql-check expectedResult:1 select count(*) from user_tab_cols where lower(table_name) ='ca_badge_layout_items' and lower(column_name) = 'doc_file'
alter table ca_badge_layout_items drop column doc_file;]]></sql>
		<connection><![CDATA[Dev]]></connection>
		<timestamp><![CDATA[1720171732937]]></timestamp>
		<type><![CDATA[Script]]></type>
		<executed><![CDATA[1]]></executed>
		<execTime><![CDATA[1.753]]></execTime>
	</historyItem>
</history>
